<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>AI Website Prompt Builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body {
            background-color: transparent;
            padding: 20px;
        }
        .form-section {
            margin-bottom: 30px;
        }
        .suggestion-select {
            width: auto;
            flex: 0 0 200px;
        }
        #json-output {
            height: 80vh;
            font-family: monospace;
            font-size: 0.9rem;
            resize: vertical;
        }
        .form-container {
            height: 80vh;
            overflow-y: auto;
        }
        .json-container {
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            height: 80vh;
            display: flex;
            flex-direction: column;
        }
        .json-header {
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        .json-output-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .form-input {
            min-height: 38px;
        }
        .btn-group-sm .btn {
            font-size: 0.8rem;
        }
        .header-actions {
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            margin-bottom: 20px;
        }
        .main-header {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            margin-bottom: 20px;
        }
        .theme-selector {
            margin-bottom: 15px;
        }
        .theme-badge {
            font-size: 0.8rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }
		
        @media (max-width: 991px) {
            .form-container, .json-container {
                margin-bottom: 20px;
                height: auto;
            }
            #json-output {
                height: 400px;
            }
            .header-actions {
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="main-header">
                    <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
                        <div class="d-flex align-items-center flex-grow-1">
                            <h1 class="mb-0 me-3">Site Prompt Builder</h1>
                            <a href="https://github.com/PieterCooreman/AI-Website-Prompt-Builder" class="btn btn-sm btn-outline-dark" target="_blank" title="View on GitHub">
                                <i class="bi bi-github"></i>
                            </a>
                        </div>
                        <div class="btn-group btn-group-sm" role="group">
                            <button type="button" class="btn btn-outline-primary" id="generate-random" title="Generate random themed values">
                                <i class="bi bi-shuffle"></i> Random Theme
                            </button>
                            <button type="button" class="btn btn-outline-secondary" id="clear-form" title="Clear all fields">
                                <i class="bi bi-eraser"></i> Clear Form
                            </button>
                        </div>
                    </div>
                    <p class="text-muted mt-3 mb-0">Fill in the fields to build a <b>JSON prompt</b>. This structured output can be copied and used directly in a Generative AI model to produce a one-paged webpage based on your specifications.</p>
                    
                    <div class="theme-selector mt-3">
                        <div class="row">
                            <div class="col-12">
                                <label class="form-label small fw-bold">Theme Clusters:</label>
                                <div id="theme-badges"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-container">
                    <form id="prompt-form">
                        <div class="form-section">
                            <h5 class="border-bottom pb-2 mb-3">General Information</h5>
                            <div class="mb-3">
                                <label for="sitetitle" class="form-label">Title</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="sitetitle" placeholder="e.g., My Website">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('sitetitle').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="siteslogan" class="form-label">Slogan</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="siteslogan" placeholder="e.g., Innovate Today">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('siteslogan').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="sitelanguage" class="form-label">Language</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="sitelanguage" placeholder="e.g., English">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('sitelanguage').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="contact_details" class="form-label">Contact Details</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="contact_details" placeholder="e.g., 123 Street, City, Country">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('contact_details').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h5 class="border-bottom pb-2 mb-3">Context & Brand Identity</h5>
                            <div class="mb-3">
                                <label for="sector_activity" class="form-label">Sector/Activity</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="sector_activity" placeholder="e.g., Technology">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('sector_activity').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="target_audience" class="form-label">Target Audience</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="target_audience" placeholder="e.g., Young professionals">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('target_audience').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="mission" class="form-label">Mission</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="mission" placeholder="e.g., To improve the world through innovation">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('mission').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="vision" class="form-label">Vision</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="vision" placeholder="e.g., To become a leader in the sector">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('vision').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="core_values" class="form-label">Core Values</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="core_values" placeholder="e.g., Integrity, Innovation, Sustainability">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('core_values').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h5 class="border-bottom pb-2 mb-3">Design</h5>
                            <div class="mb-3">
                                <label for="style_preference" class="form-label">Style Preference</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="style_preference" placeholder="e.g., Modern minimalist">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('style_preference').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="colors" class="form-label">Colors</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="colors" placeholder="e.g., Blue, White, Gray">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('colors').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="typography" class="form-label">Typography</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="typography" placeholder="e.g., A classic combination">
                                     <select class="form-select suggestion-select" onchange="document.getElementById('typography').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                     </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="button_style" class="form-label">Button Style</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="button_style" placeholder="e.g., Rounded corners">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('button_style').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h5 class="border-bottom pb-2 mb-3">Imagery & Tone</h5>                            
                            <div class="mb-3">
                                <label for="tone_of_voice" class="form-label">Tone of Voice</label>
                                <div class="input-group">
                                    <input type="text" class="form-control form-input" id="tone_of_voice" placeholder="e.g., Friendly and professional">
                                    <select class="form-select suggestion-select" onchange="document.getElementById('tone_of_voice').value = this.value; updateJsonOutput();">
                                        <option value="">Suggestion</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="json-container">
                    <div class="json-header d-flex justify-content-between align-items-center">
                        <div>
                            <h5 class="mb-0">Generated JSON Prompt</h5>
                            <span class="badge bg-secondary">Output</span>
                        </div>
                        <div class="btn-group btn-group-sm" role="group">
                            <button class="btn btn-outline-success" id="copy-json" title="Copy to clipboard">
                                <i class="bi bi-copy"></i>
                            </button>
                            <button class="btn btn-outline-info" id="export-json" title="Download as file">
                                <i class="bi bi-download"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="json-output-container">
                        <textarea class="form-control border-0 flex-grow-1" id="json-output" readonly placeholder="Fill in the form to generate JSON..."></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const jsonTemplate = {
            "instructions": "Build a responsive one-page webpage with Bootstrap in HTML5, CSS3, and modern JavaScript that meets all the requirements specified below. Include all HTML, CSS, and JavaScript in one file named: index.html. Ensure the full-width header remains fixed at the top (CSS position: fixed), the Google Map uses a working key-less embed or OpenStreetMap fallback. You must define a specific, high-contrast text color that works for each component unique background in both light and dark modes. Do not reuse the default body text variable if it creates a contrast issue.",
            "output": "one complete index.html file with inline <style> en <script> sections",
            "general_data": {
                "sitetitle": "[SITETITLE]",
                "siteslogan": "[SITESLOGAN]",
                "sitelanguage": "[SITELANGUAGE]",
                "contact_details": "[CONTACT_DETAILS]"               
            },
            "context_and_brand_identity": {
                "sector_activity": "[SECTOR_ACTIVITY]",
                "target_audience": "[TARGET_AUDIENCE]",
                "mission": "[MISSION]",
                "vision": "[VISION]",
                "core_values": "[CORE_VALUES]"
            },
            "design": {
                "style_preference": "[STYLE_PREFERENCE]",
                "colors": "[COLORS]",
                "color_contrast": "ensure WCAG 2.1 AA contrast",
                "typography": "[TYPOGRAPHY]",
                "button_style": "[BUTTON_STYLE]",
                "favicon": "Generate a matching favicon",
                "header_behavior": "Full-width. Use CSS position: fixed (not sticky) with top:0 and an appropriate z-index (≥ 1000) so that the header ALWAYS remains visible, even on long scroll."
            },
            "color_contrast": {
              "minimum_ratio": "4.5:1",
              "critical_areas": [
                "all body text on backgrounds",
                "navigation links",
                "button text",
                "form labels and input text"
              ],
              "testing_requirement": "All color combinations must pass WCAG 2.1 AA using WebAIM Contrast Checker",
              "dark_mode": "Maintain 4.5:1 ratio for white text on dark backgrounds",
              "constraints": [
                "No text on gradients without overlay",
                "Minimum 4.5:1 contrast for all text-background combinations"                
              ]
            },
            "css_requirements": {
              "text_readability": [                
                "Minimum `line-height: 1.5` for body text"                     
              ],
              "background_transparency": [
                "Navigation: minimum 0.95 opacity on light, 0.9 on dark",
                "Cards: solid backgrounds or minimum 0.1 opacity overlay",
                "Hero overlays: `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.4))`"
              ]
            },            
            "text_guidelines": [
                "Body text: 16px minimum on backgrounds with 4.5:1 contrast",
                "Headings: Bold with 3:1 minimum contrast",
                "Links: Underlined or 3px color contrast with parent text"
            ],
            "icons": {
                "required_library": "Bootstrap Icons",
                "exact_cdn": "https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css",
                "implementation_rules": [
                  "Add <link rel='stylesheet' href='EXACT_CDN_URL' crossorigin='anonymous'> in <head>",                 
                  "Do NOT use inline SVG or data URIs"                   
                ]                
            },
            "imagery_and_tone": {                      
                "tone_of_voice": "[TONE_OF_VOICE]"
            },
            "content_sections": [
                "Fixed full-width header with logo, dark/light mode toggle (localStorage) and responsive hamburger menu",
                "Hero section with a parallax fixed-cover background image",
                "About-us section with a few site-themed descriptive lines",
                "Gallery of 6 royalty-free site-themed images with lightbox and lazy loading",
                "For the photo gallery, use a modern, vanilla JavaScript lightbox library with no jQuery dependencies, such as SimpleLightbox or GLightbox",
                "Call-to-action guiding visitors to the contact block",
                "Gallery of royalty-free site-themed videos (safe without attribution, lazy loaded)",
                "Contact section with provided details and embedded Google Map",
                "Privacy modal with a default policy for a site using only technical cookies",
                "Footer with social icons (Facebook, Instagram, YouTube) and back-to-top button"
              ],
              "contact_section": {
                "google_map": {
                    "requirement": "Use a fully functional embed with a public, keyless embed URL from Google Maps (or OpenStreetMap as a fallback)"
                }
                },                
            "web_technologies": [
                "Use CDN links for external libraries like Bootstrap. Omit the integrity and cross-origin attributes in the <link> and <script> tags. This prevents the browser from blocking the files if the hash is outdated.",         
                "responsive menu with hamburger icon",                      
                "use hover effects for buttons, links, and images where possible"                
            ],
            "functionality": {
                "animations": "Subtle animate-on-scroll (fade/slide)",
                "cookie_consent": "Create a simple, custom cookie banner at the bottom of the page. This banner must not use any external scripts and must store the user's choice in localStorage to be hidden on subsequent visits. Add a link to the privacy modal.",
                "smooth_scrolling": true,
                "hover_effects": "Buttons, links, and images",
                "a11y": "Full accessibility: alt text for all images, ARIA labels for navigation",
				"Bootstrap": "use popular Bootstrap components like navbar, cards, buttons, carousels, tabs, ..."
              },
            "code_validation": "Ensure all JS follows ESLint rules and check element existence before manipulation.",
            "assets": {
                "images": "Use royalty-free URLs from Unsplash/Pexels/Pixabay. For every <img> tag, add an explicit onerror handler so that if the main image fails to load (404, 403, unsupported format, etc.), the image source will be replaced with a placeholder via onerror='this.onerror=null;this.src='https://placehold.co/600x400?text=use+image+here'. This fallback logic must be present on every single image element, including gallery, hero, and thumbnails, to guarantee visual consistency and eliminate all broken image icons.",
                "videos": "Use royalty-free stock videos that are free for web use without attribution. Embed videos, but avoid direct links (hotlinking) to stock video sites like Pexels. Instead, use placeholder videos from a service that allows hotlinking."
          }
        };
 

        const thematicClusters = {
        "tech_startup": {
        "name": "Tech Startup",
        "color": "primary",
        "sitetitle": "The Innovation Hub",
        "siteslogan": "The future is now",
        "sitelanguage": "English",
        "contact_details": "1 Wall Street, New York, USA",
        "sector_activity": "Tech",
        "target_audience": "Tech enthusiasts",
        "mission": "To improve the world through innovation",
        "vision": "To lead innovation",
        "core_values": "Integrity, Innovation, Sustainability",
        "style_preference": "Modern minimalist",
        "colors": [
            "#1E3A8A (Deep Blue)",
            "#3B82F6 (Electric Blue)",
            "#F8FAFC (Cool White)",
            "#64748B (Slate Gray)"
        ],
        "typography": "Headings: Montserrat (Modern, Geometric Sans-Serif), Body: Roboto (Clean, Neutral Sans-Serif)",
        "button_style": "Rounded corners with a subtle glow on hover",        
        "tone_of_voice": "Direct and to the point"
    },
    "health_wellness": {
        "name": "Health & Wellness",
        "color": "success",
        "sitetitle": "Vital Life",
        "siteslogan": "Harmony for body and mind",
        "sitelanguage": "English",
        "contact_details": "25 Main Street, Utrecht, Netherlands",
        "sector_activity": "Healthcare",
        "target_audience": "Health-conscious individuals",
        "mission": "To empower people to reach their potential",
        "vision": "Health accessible to everyone",
        "core_values": "Sustainability, Innovation, Inclusivity",
        "style_preference": "Organic and natural",
        "colors": [
            "#059669 (Emerald Green)",
            "#10B981 (Mint Green)",
            "#ECFCCB (Sage White)",
            "#0891B2 (Ocean Blue)"
        ],
        "typography": "Headings: Lora (Elegant, Serif), Body: Source Serif Pro (Classic, Readable Serif)",
        "button_style": "Soft edges with a calm color transition on hover",        
        "tone_of_voice": "Calm and reassuring"
    },
    "creative_agency": {
        "name": "Creative Agency",
        "color": "warning",
        "sitetitle": "Creative Souls",
        "siteslogan": "Where imagination comes to life",
        "sitelanguage": "English",
        "contact_details": "101 Champs-Élysées, Paris, France",
        "sector_activity": "Media & Entertainment",
        "target_audience": "Creatives",
        "mission": "To protect cultural heritage",
        "vision": "A world where technology is human",
        "core_values": "Passion, Growth, Result-oriented",
        "style_preference": "Bold and colorful",
        "colors": [
            "#F97316 (Vibrant Orange)",
            "#06B6D4 (Turquoise)",
            "#EC4899 (Hot Pink)",
            "#8B5CF6 (Electric Purple)"
        ],
        "typography": "Logo/Decorative: Great Vibes (Flowing, Script), Body: Lato (Friendly, Humanist Sans-Serif)",
        "button_style": "Gradient buttons with a dynamic drop shadow on hover",        
        "tone_of_voice": "Playful and informal"
    },
    "financial_services": {
        "name": "Financial Services",
        "color": "info",
        "sitetitle": "Financial Freedom",
        "siteslogan": "Building success together",
        "sitelanguage": "English",
        "contact_details": "7 Bahnhofstrasse, Zurich, Switzerland",
        "sector_activity": "Financial services",
        "target_audience": "Young professionals",
        "mission": "Financial independence for everyone",
        "vision": "To make a global impact",
        "core_values": "Integrity, Innovation, Sustainability",
        "style_preference": "Elegant and luxurious",
        "colors": [
            "#1E293B (Navy Blue)",
            "#F59E0B (Gold)",
            "#FEF7CD (Ivory)",
            "#374151 (Charcoal Gray)"
        ],
        "typography": "Headings: Playfair Display (Elegant, High-contrast Serif), Body: Source Sans Pro (Professional, Neutral Sans-Serif)",
        "button_style": "Sharp buttons with a subtle 3D-like effect and a slight sheen",        
        "tone_of_voice": "Formal and authoritative"
    },
    "restaurant_food": {
        "name": "Restaurant & Food",
        "color": "danger",
        "sitetitle": "The Palate",
        "siteslogan": "Where every meal tells a story",
        "sitelanguage": "English",
        "contact_details": "20 Viale Roma, Rome, Italy",
        "sector_activity": "Tourism & Hospitality",
        "target_audience": "Local communities",
        "mission": "To provide unforgettable experiences",
        "vision": "To create a platform for connection",
        "core_values": "Quality, Service, Accessibility",
        "style_preference": "Cozy and warm",
        "colors": [
            "#92400E (Rich Brown)",
            "#16A34A (Forest Green)",
            "#EA580C (Warm Orange)",
            "#FEF3C7 (Cream)"
        ],
        "typography": "Headings: Lobster (Playful, Bold Script), Body: Raleway (Clean, Sans-Serif with a touch of elegance)",
        "button_style": "Buttons with icons, rounded corners, and a light shadow",
        "tone_of_voice": "Friendly and professional"
    },
    "education_online": {
        "name": "Online Education",
        "color": "secondary",
        "sitetitle": "Education Online",
        "siteslogan": "Discover, learn, grow",
        "sitelanguage": "English",
        "contact_details": "123 Main St, New York, USA",
        "sector_activity": "Education",
        "target_audience": "Students",
        "mission": "To democratize access to knowledge",
        "vision": "A culture of lifelong learning",
        "core_values": "Openness, Curiosity, Eagerness to learn",
        "style_preference": "Clean and functional",
        "colors": [
            "#2563EB (Royal Blue)",
            "#F8FAFC (Pure White)",
            "#E2E8F0 (Light Gray)",
            "#475569 (Slate Blue)"
        ],
        "typography": "Headings: Poppins (Clean, Geometric Sans-Serif), Body: Open Sans (Highly readable, Neutral Sans-Serif)",
        "button_style": "Flat design with a slight background change on hover",        
        "tone_of_voice": "Inspiring and motivating"
    },
    "eco_sustainability": {
        "name": "Eco & Sustainability",
        "color": "success",
        "sitetitle": "Green Footprint",
        "siteslogan": "Your partner in growth",
        "sitelanguage": "English",
        "contact_details": "10 Grote Markt, Bruges, Belgium",
        "sector_activity": "Energy",
        "target_audience": "Families with children",
        "mission": "To leave a healthy planet",
        "vision": "To make all homes sustainable",
        "core_values": "Sustainability, Innovation, Inclusivity",
        "style_preference": "Organic and natural",
        "colors": [
            "#15803D (Earth Green)",
            "#0284C7 (Sky Blue)",
            "#F0FDF4 (Natural White)",
            "#A3E635 (Fresh Lime)"
        ],
        "typography": "Headings: Fredoka (Friendly, Rounded Sans-Serif), Body: Nunito (Soft, Balanced Sans-Serif)",
        "button_style": "Rounded corners with a natural 'pulse' effect on hover",        
        "tone_of_voice": "Inspiring and motivating"
    },
    "travel_adventure": {
        "name": "Travel & Adventure",
        "color": "info",
        "sitetitle": "The World Discovered",
        "siteslogan": "Your compass for unforgettable journeys",
        "sitelanguage": "English",
        "contact_details": "500 Avenida Paulista, São Paulo, Brazil",
        "sector_activity": "Tourism & Hospitality",
        "target_audience": "Travelers",
        "mission": "To provide unforgettable experiences",
        "vision": "A world without borders for communication",
        "core_values": "Openness, Curiosity, Eagerness to learn",
        "style_preference": "Playful and dynamic",
        "colors": [
            "#F97316 (Sunset Orange)",
            "#0891B2 (Adventure Blue)",
            "#EC4899 (Tropical Pink)",
            "#FEF9C3 (Sandy Yellow)"
        ],
        "typography": "Headings: Quicksand (Light, Rounded Sans-Serif), Body: Raleway (Clean, Sans-Serif with a touch of elegance)",
        "button_style": "Large, eye-catching buttons with a playful shadow on hover",
        "tone_of_voice": "Playful and informal"
    }
};

        // The issue is in the functions that add options and badges. They are called multiple times,
        // causing duplication. We need to clear the existing options before adding new ones.

        // Fix 1: Refactor to a single, idempotent function to add theme options
        function addThemeOptionsAndBadges() {
            const selectElements = document.querySelectorAll('.suggestion-select');
            const themeBadgesContainer = document.getElementById('theme-badges');

            // Clear existing options from all select elements
            selectElements.forEach(select => {
                // Keep the first option ("Suggestion")
                while (select.options.length > 1) {
                    select.remove(1);
                }
            });

            // Clear existing badges
            themeBadgesContainer.innerHTML = '';

            for (const key in thematicClusters) {
                if (thematicClusters.hasOwnProperty(key)) {
                    const theme = thematicClusters[key];
                    
                    // Add badge
                    const badge = document.createElement('span');
                    badge.className = `badge bg-${theme.color} theme-badge btn`;
                    badge.textContent = theme.name;
                    badge.onclick = () => applyTheme(key);
                    themeBadgesContainer.appendChild(badge);
                    
                    // Add option to each select
                    const themeOption = document.createElement('option');
                    themeOption.value = key;
                    themeOption.textContent = `${theme.name} Theme`;
                    
                    selectElements.forEach(select => {
                        select.appendChild(themeOption.cloneNode(true));
                    });
                }
            }
        }

        // Call this function once on page load
        document.addEventListener('DOMContentLoaded', addThemeOptionsAndBadges);


        // -------------------------
        // Core Logic
        // -------------------------

        function getFormData() {
            const data = {};
            const formElements = document.querySelectorAll('#prompt-form .form-input');
            formElements.forEach(input => {
                data[input.id] = input.value;
            });
            return data;
        }

        function updateJsonOutput() {
            const formData = getFormData();
            const clonedTemplate = JSON.parse(JSON.stringify(jsonTemplate));

            function replacePlaceholders(obj) {
                for (const key in obj) {
                    if (typeof obj[key] === 'string') {
                        let value = formData[key];
                        if (key === 'colors' && Array.isArray(value)) {
                            value = value.join(', ');
                        }
                        if (value) {
                            const placeholder = `[${key.toUpperCase()}]`;
                            obj[key] = obj[key].replace(placeholder, value);
                        }
                    } else if (typeof obj[key] === 'object' && obj[key] !== null) {
                        replacePlaceholders(obj[key]);
                    }
                }
            }
            
            replacePlaceholders(clonedTemplate);
            
            // Clean up empty placeholder objects and arrays
            const cleanTemplate = JSON.parse(JSON.stringify(clonedTemplate, (key, value) => {
                if (Array.isArray(value) && value.length === 0) return undefined;
                if (typeof value === 'object' && value !== null && Object.keys(value).length === 0) return undefined;
                if (typeof value === 'string' && value.startsWith('[') && value.endsWith(']')) return undefined;
                return value;
            }, 2));
            
            document.getElementById('json-output').value = JSON.stringify(cleanTemplate, null, 2);
        }

        function applyTheme(themeKey) {
            const theme = thematicClusters[themeKey];
            if (!theme) return;
            
            document.getElementById('sitetitle').value = theme.sitetitle || '';
            document.getElementById('siteslogan').value = theme.siteslogan || '';
            document.getElementById('sitelanguage').value = theme.sitelanguage || '';
            document.getElementById('contact_details').value = theme.contact_details || '';
            document.getElementById('sector_activity').value = theme.sector_activity || '';
            document.getElementById('target_audience').value = theme.target_audience || '';
            document.getElementById('mission').value = theme.mission || '';
            document.getElementById('vision').value = theme.vision || '';
            document.getElementById('core_values').value = theme.core_values || '';
            document.getElementById('style_preference').value = theme.style_preference || '';
            document.getElementById('colors').value = Array.isArray(theme.colors) ? theme.colors.join(', ') : theme.colors || '';
            document.getElementById('typography').value = theme.typography || '';
            document.getElementById('button_style').value = theme.button_style || '';
            document.getElementById('tone_of_voice').value = theme.tone_of_voice || '';
            
            updateJsonOutput();
        }

        function generateRandomTheme() {
            const keys = Object.keys(thematicClusters);
            const randomKey = keys[Math.floor(Math.random() * keys.length)];
            applyTheme(randomKey);
        }

        function clearForm() {
            const formElements = document.querySelectorAll('#prompt-form .form-input');
            formElements.forEach(input => input.value = '');
            updateJsonOutput();
        }

        function copyJson() {
            const output = document.getElementById('json-output');
            output.select();
            output.setSelectionRange(0, 99999);
            document.execCommand('copy');
            alert('JSON copied to clipboard!');
        }

        function exportJson() {
            const json = document.getElementById('json-output').value;
            const blob = new Blob([json], { type: 'application/json' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'website_prompt.json';
            a.click();
            URL.revokeObjectURL(a.href);
        }

        document.getElementById('prompt-form').addEventListener('input', updateJsonOutput);
        document.getElementById('generate-random').addEventListener('click', generateRandomTheme);
        document.getElementById('clear-form').addEventListener('click', clearForm);
        document.getElementById('copy-json').addEventListener('click', copyJson);
        document.getElementById('export-json').addEventListener('click', exportJson);

        updateJsonOutput(); // Initial call
    </script>
</body>
</html>
